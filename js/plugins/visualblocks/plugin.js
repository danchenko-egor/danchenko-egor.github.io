(function(){"use strict";const t=t=>{let o=t;const s=()=>o,e=t=>{o=t};return{get:s,set:e}};var o=tinymce.util.Tools.resolve("tinymce.PluginManager");const s=(t,o)=>{t.dispatch("VisualBlocks",{state:o})},e=(t,o,e)=>{const l=t.dom;l.toggleClass(t.getBody(),"mce-visualblocks"),e.set(!e.get()),s(t,e.get())},l=(t,o,s)=>{t.addCommand("mceVisualBlocks",(()=>{e(t,o,s)}))},c=t=>o=>o.options.get(t),i=t=>{const o=t.options.register;o("visualblocks_default_state",{processor:"boolean",default:!1})},a=c("visualblocks_default_state"),n=(t,o,s)=>{t.on("PreviewFormats AfterPreviewFormats",(o=>{s.get()&&t.dom.toggleClass(t.getBody(),"mce-visualblocks","afterpreviewformats"===o.type)})),t.on("init",(()=>{a(t)&&e(t,o,s)}))},u=(t,o)=>s=>{s.setActive(o.get());const e=t=>s.setActive(t.state);return t.on("VisualBlocks",e),()=>t.off("VisualBlocks",e)},r=(t,o)=>{const s=()=>t.execCommand("mceVisualBlocks");t.ui.registry.addToggleButton("visualblocks",{icon:"visualblocks",tooltip:"Show blocks",onAction:s,onSetup:u(t,o)}),t.ui.registry.addToggleMenuItem("visualblocks",{text:"Show blocks",icon:"visualblocks",onAction:s,onSetup:u(t,o)})};var g=()=>{o.add("visualblocks",((o,s)=>{i(o);const e=t(!1);l(o,s,e),r(o,e),n(o,s,e)}))};g()})();